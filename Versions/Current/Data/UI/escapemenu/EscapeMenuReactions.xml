<!-- edited with XML Spy v4.3 U (http://www.xmlspy.com) by Alexander Veselov (NIVAL Interactive) -->
<!-- deleted comment here -->
<base>
	<comment>
		<!--AtomicReactions->Type
1 ) set game pause ( if Param2 != 0 ) else remove pause (pause type == param1)
2) send message to Input ( messageID = Param1, message nParam = Param2
3) send message to MainLoop ( messageID = Param1, message parametres = Param2
4) set global war ( global var name = Param1, var = Param2 )
5) EMART_CUSTOM_REACTION ( reaction name == Param1, reaction param = Param2)
6 ) EMART_NOP (no operation)
7) EMART_SET_TEXT_TO_WINDOW
8) EMART_NOP_DONT_PROCESSED - no operation and don't process this message
9) EMART_SET_TEXT_TO_WINDOW_FROM_GLOBALVAR

-->
		<!--you may use string representations for pause type.
	PAUSE_TYPE_NO_PAUSE						= -1,		// no pause
	PAUSE_TYPE_USER_PAUSE					= 0,		// user pause (SPACE pressed)
	PAUSE_TYPE_INACTIVE						= 1,		// application lost focus (ALT+TAB for example)
	PAUSE_TYPE_PREMISSION					= 2,		// pause between mission started and first 2 frames displayed
	PAUSE_TYPE_MENU								= 3,		// ESC menu initiated
	PAUSE_TYPE_MP_NO_SEGMENT_DATA	= 100,	// no segment data in multiplayer mode
	PAUSE_TYPE_MP_LAGG						= 101,	// LAGG in multiplayer mode
	PAUSE_TYPE_MP_TIMEOUT					= 102,	// 
	PAUSE_TYPE_MP_LOADING					= 103,
	PAUSE_TYPE_NO_CONTROL					= 100,
-->
	</comment>
	<Commands>
		<item>
			<!--Check if some windows opened (and close)
since ESC is pressed-->
			<IncomingMessage>
				<first>MC_SHOW_ESCAPE_MENU</first>
				<second>0</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VAR_FIRST</first>
				<second>
					<item>temp.escapemenu.endmission.shown</item>
					<item>temp.escapemenu.help.shown</item>
					<item>temp.escapemenu.objectives.shown</item>
					<item>temp.escapemenu.win.shown</item>
					<item>temp.escapemenu.singleobjective.shown</item>
					<item>temp.escapemenu.loose.shown</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--no one is open-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_ESCAPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--temp.escapemenu.endmission.shown 
press back in that window-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_ESCAPE_EXIT_TO_ROOT_ESCAPE</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--help shown - press back-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_HELP_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--objectives shown - press back-->
					<key>3</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_OBJECTIVES_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--win shown - press back-->
					<key>4</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_WIN_BACK_TO_MISSION</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--single objective shown - press back-->
					<key>5</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_SINGLE_OBJECTIVE_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--loose shown - press back-->
					<key>6</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_MP_LOOSE_RETURN_TO_GAME</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_SP_LOOSE_RETURN_TO_GAME</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SP_help_SHOWN-->
					<key>8</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_HELP_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--MP_help_SHOWN-->
					<key>9</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_HELP_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SP_objectives_SHOWN-->
					<key>16</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_OBJECTIVES_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--MP_objectives_SHOWN-->
					<key>17</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_OBJECTIVES_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--WIN SHOWN-->
					<key>ECCR_DEFAULT</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.win.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--called escape menu-->
			<IncomingMessage>
				<first>MC_SHOW_ESCAPE_MENU</first>
				<second>1</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>MultiplayerGame</item>
					<item>temp.escapemenu.shown</item>
					<item>temp.escapemenu.endmission.shown</item>
					<item>temp.escapemenu.help.shown</item>
					<item>temp.escapemenu.objectives.shown</item>
					<item>temp.escapemenu.win.shown</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!---->
					<key>ECCR_COMMON</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_CHECK_ENABLE_WINDOW</Param1>
							<Param2>BUTTON_ESCAPE_OBJECTIVES</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--MP_MENU_NOT_SHOWN-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_CHECK_ENABLE_WINDOW</Param1>
							<Param2>BUTTON_MP_TIMEOUT_CALL</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--MP_MENU_SHOWN-->
					<key>3</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SP_MENU_NOT_SHOWN-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_CHECK_ENABLE_WINDOW</Param1>
							<Param2>BUTTON_ESCAPE_SAVE</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SP_MENU_SHOWN-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SP_endmission_SHOWN-->
					<key>4</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_ESCAPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.endmission.shown</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--MP_endmission_SHOWN-->
					<key>5</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_ESCAPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.endmission.shown</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SP_help_SHOWN-->
					<key>8</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_HELP_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--MP_help_SHOWN-->
					<key>9</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_HELP_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SP_objectives_SHOWN-->
					<key>16</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_OBJECTIVES_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--MP_objectives_SHOWN-->
					<key>17</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_NOTIFY_STATE_CHANGED_MESSAGE</Param1>
							<Param2>BUTTON_OBJECTIVES_BACK</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--WIN SHOWN-->
					<key>ECCR_DEFAULT</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.win.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--hide all windows from escape menu-->
			<IncomingMessage>
				<first>MC_SHOW_ESCAPE_MENU</first>
				<second>2</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.win.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_HELP_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_HELP_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.help.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_OBJECTIVES_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_OBJECTIVES_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.objectives.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.singleobjective.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--check and disable objectives button-->
			<IncomingMessage>
				<first>MC_CHECK_ENABLE_WINDOW</first>
				<second>BUTTON_ESCAPE_OBJECTIVES</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>Mission.Current.HasObjectivesToShow</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--no objectives-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_DISABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_ESCAPE_OBJECTIVES</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--objective given-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_ENABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_ESCAPE_OBJECTIVES</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--check MP win button-->
			<IncomingMessage>
				<first>MC_CHECK_ENABLE_WINDOW</first>
				<second>BUTTON_MP_END_WIN_MISSION</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.CurrentMisssion.finished</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--not finished-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_DISABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_MP_END_WIN_MISSION</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--finished-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_ENABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_MP_END_WIN_MISSION</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--check MP timeout button-->
			<IncomingMessage>
				<first>MC_CHECK_ENABLE_WINDOW</first>
				<second>BUTTON_MP_TIMEOUT_CALL</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.LocalPlayer.TimeOutEnable</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--no time-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_DISABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_MP_TIMEOUT_CALL</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--time remains-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_ENABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_MP_TIMEOUT_CALL</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--check save button-->
			<IncomingMessage>
				<first>MC_CHECK_ENABLE_WINDOW</first>
				<second>BUTTON_ESCAPE_SAVE</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>Options.MissionSave.Disabled</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--not disabled-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_ENABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_ESCAPE_SAVE</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--disabled-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_DISABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_ESCAPE_SAVE</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--check SP win button-->
			<IncomingMessage>
				<first>MC_CHECK_ENABLE_WINDOW</first>
				<second>BUTTON_SP_END_WIN_MISSION</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VAR_FIRST</first>
				<second>
					<item>temp.CurrentMisssion.finished</item>
					<item>Mission.Current.IsTemplate</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--not finished not template-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_DISABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_SP_END_WIN_MISSION</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--temp.CurrentMisssion.finished-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_ENABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_SP_END_WIN_MISSION</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--Mission.Current.IsTemplate-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_ENABLE_WINDOW_FORCE</Param1>
							<Param2>BUTTON_SP_END_WIN_MISSION</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--save game pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_SAVE</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_MAINLOOP</Type>
							<Param1>MISSION_COMMAND_SAVE_MISSION</Param1>
							<Param2>0</Param2>
						</item>
					</data>
					<!--call save game-->
				</item>
			</Reactions>
		</item>
		<item>
			<!--Load game pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_LOAD</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_MAINLOOP</Type>
							<Param1>MISSION_COMMAND_LOAD_MISSION</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Options pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_OPTIONS</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_MAINLOOP</Type>
							<Param1>MISSION_COMMAND_OPTIONSSETTINGS</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Extit to Windows pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_EXIT_TO_WINDOWS</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionExitToWindows</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Extit to Main Menu pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_EXIT_TO_MAINMENU</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionQuitMission</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Restart Mission pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_RESTART_MISSION</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionRestartMisssion</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Return to game pressed(IN ESC)-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_RETURN_TO_GAME</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<!--Win not shown-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_ESCAPE_MENU</Param1>
							<Param2/>
						</item>
					</data>
				</item>
				<item>
					<!--Win shown-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_ESCAPE_MENU</Param1>
							<Param2/>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.win.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Return to game pressed(IN sp LOOSE)-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_SP_LOOSE_RETURN_TO_GAME</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Return to game pressed(IN mp LOOSE)-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_MP_LOOSE_RETURN_TO_GAME</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--WIN Message recieved-->
			<IncomingMessage>
				<first>WCB_YOU_WIN</first>
				<second/>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.escapemenu.win.shown</item>
					<item>History.Playing</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--not shown-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionAutosaveMissionEnd</Param1>
							<Param2/>
						</item>
						<item>
							<Type>EMART_SET_TEXT_TO_WINDOW</Type>
							<Param1>STATIC_SP_WIN</Param1>
							<Param2>escape_mission_win_message</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.win.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--shown-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
						</item>
					</data>
				</item>
				<item>
					<!--not shown (replay)-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ConstructWhoWin</Param1>
							<Param2/>
						</item>
						<item>
							<Type>EMART_SET_TEXT_TO_WINDOW_FROM_GLOBALVAR</Type>
							<Param1>STATIC_SP_WIN</Param1>
							<Param2>temp.Replay.WinMessage</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.win.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_MAINLOOP</Type>
							<Param1>MAIN_COMMAND_SAVE</Param1>
							<Param2>Autosave - Mission End.sav</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--shown (replay)-->
					<key>3</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--DRAW Message recieved-->
			<IncomingMessage>
				<first>WCB_DRAW</first>
				<second/>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.escapemenu.win.shown</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--not shown-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_SET_TEXT_TO_WINDOW</Type>
							<Param1>STATIC_MP_FAIL</Param1>
							<Param2>escape_mission_fail_message_draw_mp</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--shown-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--LOOSE Message recieved-->
			<IncomingMessage>
				<first>WCB_YOU_LOOSE</first>
				<second/>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.escapemenu.win.shown</item>
					<item>MultiplayerGame</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--single player-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--single player-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>SP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--multi player[win not shown]-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--multi player[win shown]-->
					<key>3</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Win mission (in Win dialog) pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_WIN_WIN_MISSION</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionWin</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Finish Mission pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_WIN_MISSION</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.CurrentMisssion.finished</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--template mission [abort]-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.Mission.Current.Aborted</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>Mission.Current.Bonus</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionWin</Param1>
							<Param2/>
						</item>
					</data>
				</item>
				<item>
					<!--mission finished-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionWin</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Help pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_HELP</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_HELP_SCREEN</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Help called-->
			<IncomingMessage>
				<first>MC_SHOW_HELP_SCREEN</first>
				<second/>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.escapemenu.help.shown</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--NOT SHOWN-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MISSION_HELP_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MISSION_HELP_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.help.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SHOWN-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_HELP_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_HELP_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.help.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Objectives pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_OBJECTIVES</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>Mission.Current.HasObjectivesToShow</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--no objectives-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
						</item>
					</data>
				</item>
				<item>
					<!--objectives given-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_OBJECTIVES</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Objectives called-->
			<IncomingMessage>
				<first>MC_SHOW_OBJECTIVES</first>
				<second/>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.escapemenu.objectives.shown</item>
				</second>
				<second>
					<item>Mission.Current.HasObjectivesToShow</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--NOT SHOWN and may not be show-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
							<Param1>0</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SHOWN and may be shown-->
					<key>3</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_OBJECTIVES_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_OBJECTIVES_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.objectives.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--NOT SHOWN and may be shown-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MISSION_OBJECTIVES_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MISSION_OBJECTIVES_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.objectives.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Single Objectives Button pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>MISSION_BUTTON_SINGLE_OBJECTIVE</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>Mission.Current.HasActiveObjective</item>
				</second>
				<second>
					<item>temp.escapemenu.singleobjective.shown</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--no objectives (not shown )-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
						</item>
					</data>
				</item>
				<item>
					<!--objectives given (not shown )-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>WCC_SHOW_LAST_OBJECTIVE</Param1>
						</item>
					</data>
				</item>
				<item>
					<!--no objectives ( shown )-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.singleobjective.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<!--for tutorial-->
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>Mission.Current.ObjectiveShown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--objectives given (shown )-->
					<key>3</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.singleobjective.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<!--for tutorial-->
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>Mission.Current.ObjectiveShown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Single objective-->
			<IncomingMessage>
				<first>MC_SHOW_SINGLE_OBJECTIVE</first>
				<second/>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.escapemenu.singleobjective.shown</item>
				</second>
				<second>
					<item>Mission.Current.HasActiveObjective</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--NOT SHOWN and may not be show-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
							<Param1>0</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SHOWN and may be shown-->
					<key>3</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>WCC_OBJECTIVES_CLOSED</Param1>
							<Param2/>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.singleobjective.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<!--for tutorial-->
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>Mission.Current.ObjectiveShown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--SHOWN and may not be shown-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>WCC_OBJECTIVES_CLOSED</Param1>
							<Param2/>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.singleobjective.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<!--for tutorial-->
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>Mission.Current.ObjectiveShown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--NOT SHOWN and may be shown-->
					<key>2</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.singleobjective.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<!--for tutorial-->
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>Mission.Current.ObjectiveShown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--WCC_HIDE_OBJECTVE_WINDOW-->
			<IncomingMessage>
				<first>WCC_HIDE_OBJECTVE_WINDOW</first>
				<second/>
			</IncomingMessage>
			<Reactions>
				<item>
					<!--single player-->
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MISSION_SINGLE_OBJECTIVE_DIALOG</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.singleobjective.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<!--for tutorial-->
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>Mission.Current.ObjectiveShown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--End mission (Submenu) pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_END_MISSION</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>MultiplayerGame</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--single player-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_CHECK_ENABLE_WINDOW</Param1>
							<Param2>BUTTON_SP_END_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>SP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>SP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.endmission.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
				<item>
					<!--multiplayer-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_CHECK_ENABLE_WINDOW</Param1>
							<Param2>BUTTON_MP_END_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.endmission.shown</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--SP finish mission-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_SP_END_WIN_MISSION</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>temp.CurrentMisssion.finished</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--template mission [abort]-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>Mission.Current.Bonus</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.Mission.Current.Aborted</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionWin</Param1>
							<Param2/>
						</item>
					</data>
				</item>
				<item>
					<!--mission finished-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionWin</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--MP finish mission-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_MP_END_WIN_MISSION</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionWin</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--EndMission - > back pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_ESCAPE_EXIT_TO_ROOT_ESCAPE</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>SP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>SP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_END_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.endmission.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_ESCAPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--WIN - > back pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_WIN_BACK_TO_MISSION</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.win.shown</Param1>
							<Param2>0</Param2>
						</item>
						<item>
							<Type>EMART_PAUSE_GAME</Type>
							<Param1>PAUSE_TYPE_MENU</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Objectives - > back pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_OBJECTIVES_BACK</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_OBJECTIVES</Param1>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Help - > back pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_HELP_BACK</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_HELP_SCREEN</Param1>
							<Param2/>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--SingleObjective - > back pressed-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_SINGLE_OBJECTIVE_BACK</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<!--NOT SHOWN-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>MC_SHOW_SINGLE_OBJECTIVE</Param1>
							<Param2>0</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--Local player OUT OF SYNC-->
			<IncomingMessage>
				<first>MC_LOCAL_PLAYER_OUT_OF_SYNC</first>
				<second/>
			</IncomingMessage>
			<Reactions>
				<item>
					<!--show fail 
dialog with 
modified text-->
					<data>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_TEXT_TO_WINDOW</Type>
							<Param1>STATIC_MP_FAIL</Param1>
							<Param2>escape_mission_fail_message_you_out_of_sync</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--MC_MANY_PLAYER_OUT_OF_SYNC-->
			<IncomingMessage>
				<first>MC_MANY_PLAYER_OUT_OF_SYNC</first>
				<second/>
			</IncomingMessage>
			<Reactions>
				<item>
					<!--show fail 
dialog with 
modified text-->
					<data>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.CurrentMisssion.finished</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_TEXT_TO_WINDOW</Type>
							<Param1>STATIC_MP_FAIL</Param1>
							<Param2>escape_mission_fail_message_several_out_of_sync</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_REMOVE_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_SET_GLOBAL_VAR</Type>
							<Param1>temp.escapemenu.loose.shown</Param1>
							<Param2>1</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_SHOW_WINDOW_FORCE</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_SET</Param1>
							<Param2>MP_FAIL_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>ESCAPE_WIN_MISSION</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--MC_ENTER_CHAT_MODE-->
			<IncomingMessage>
				<first>MC_ENTER_CHAT_MODE</first>
				<second>0</second>
			</IncomingMessage>
			<CustomCheck>
				<first>ECCT_BOOL_GLOBAL_VARS_ENUM</first>
				<second>
					<item>MultiplayerGame</item>
				</second>
			</CustomCheck>
			<Reactions>
				<item>
					<!--single player - no reaction( to disable )
reaction for multiplayer not exitsts, because we don't manage it-->
					<key>0</key>
					<data>
						<item>
							<Type>EMART_NOP</Type>
						</item>
					</data>
				</item>
				<item>
					<!--single player - no reaction( to disable )
reaction for multiplayer not exitsts, because we don't manage it-->
					<key>1</key>
					<data>
						<item>
							<Type>EMART_NOP_DONT_PROCESSED</Type>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--BUTTON_MP_TIMEOUT_CALL-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_MP_TIMEOUT_CALL</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_HIDE_WINDOW_FORCE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_MESSAGE_TO_INPUT</Type>
							<Param1>UI_MODAL_FLAG_FORCE_REMOVE</Param1>
							<Param2>MP_ESCAPE_MENU_MAIN</Param2>
						</item>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionSetMultiplayerTimeout</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
		<item>
			<!--BUTTON_MP_TIMEOUT_CANCEL-->
			<IncomingMessage>
				<first>UI_NOTIFY_STATE_CHANGED_MESSAGE</first>
				<second>BUTTON_MP_TIMEOUT_CANCEL</second>
			</IncomingMessage>
			<Reactions>
				<item>
					<data>
						<item>
							<Type>EMART_CUSTOM_REACTION</Type>
							<Param1>ReactionRemoveMultiplayerTimeout</Param1>
							<Param2>1</Param2>
						</item>
					</data>
				</item>
			</Reactions>
		</item>
	</Commands>
</base>
